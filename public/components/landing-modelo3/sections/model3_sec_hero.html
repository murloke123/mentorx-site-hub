<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hero Section - Model 3</title>
  <link rel="stylesheet" href="/components/landing-modelo3/styles/model3_sec_hero.css">
  
  <!-- Inline Editing Styles -->
  <style>
    /* Inline Editing Styles - APENAS para modo de edi√ß√£o */
    body:not(.public-view) [data-field] {
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    body:not(.public-view) [data-field]:hover {
      outline: 2px dashed rgba(52, 211, 153, 0.5);
      outline-offset: 4px;
    }
    
    body:not(.public-view) [data-field].editing {
      outline: 2px solid #10b981;
      outline-offset: 4px;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 4px;
      padding: 4px;
    }
    
    body:not(.public-view) [data-field].editing:focus {
      outline: 2px solid #059669;
    }
    
    /* Cursor normal para visualiza√ß√£o p√∫blica */
    body.public-view [data-field] {
      cursor: default !important;
    }
    
    body.public-view h1,
    body.public-view h2, 
    body.public-view h3,
    body.public-view p,
    body.public-view span,
    body.public-view div:not(.btn-primary):not(.btn-secondary) {
      cursor: default !important;
    }
    
    /* Manter cursor pointer para bot√µes */
    body.public-view button,
    body.public-view .btn-primary,
    body.public-view .btn-secondary,
    body.public-view a {
      cursor: pointer !important;
    }
    
    /* Edit Controls */
    .edit-controls {
      position: absolute !important;
      top: -40px !important;
      right: 0 !important;
      display: flex !important;
      gap: 8px !important;
      background: rgba(0, 0, 0, 0.9) !important;
      padding: 8px !important;
      border-radius: 8px !important;
      backdrop-filter: blur(16px) !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      z-index: 1000 !important;
      pointer-events: auto !important;
      user-select: none !important; /* Impede sele√ß√£o de texto */
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
    }
    
    .edit-btn {
      background: #10b981 !important;
      color: white !important;
      border: none !important;
      padding: 6px 12px !important;
      border-radius: 4px !important;
      font-size: 12px !important;
      font-weight: 600 !important;
      cursor: pointer !important;
      transition: all 0.2s ease !important;
      display: flex !important;
      align-items: center !important;
      gap: 4px !important;
      pointer-events: auto !important;
      user-select: none !important; /* Impede sele√ß√£o de texto */
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      outline: none !important;
      white-space: nowrap !important;
    }
    
    .edit-btn:hover {
      background: #059669 !important;
      transform: translateY(-1px) !important;
    }
    
    .edit-btn:focus {
      outline: 2px solid #10b981 !important;
      outline-offset: 2px !important;
    }
    
    .edit-btn.cancel {
      background: #ef4444 !important;
    }
    
    .edit-btn.cancel:hover {
      background: #dc2626 !important;
    }
    
    .edit-btn.loading {
      background: #6b7280 !important;
      cursor: not-allowed !important;
    }
    
    /* Success/Error Messages */
    .edit-message {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 1001;
      transition: all 0.3s ease;
      transform: translateX(100%);
    }
    
    .edit-message.show {
      transform: translateX(0);
    }
    
    .edit-message.success {
      background: #10b981;
    }
    
    .edit-message.error {
      background: #ef4444;
    }
    
    /* Loading Spinner */
    .loading-spinner {
      width: 12px;
      height: 12px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Reset Layout Button */
    .reset-layout-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      z-index: 1000;
      backdrop-filter: blur(16px);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 6px 25px rgba(245, 158, 11, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.2);
      min-width: 160px;
      justify-content: center;
    }
    
    .reset-layout-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(245, 158, 11, 0.5);
      background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
      scale: 1.05;
    }
    
    .reset-layout-btn:active {
      transform: translateY(-1px);
      scale: 1.02;
    }
    
    .reset-layout-btn svg {
      transition: transform 0.3s ease;
    }
    
    .reset-layout-btn:hover svg {
      transform: rotate(180deg);
    }
    
    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: scale(0.9) translateY(20px);
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .modal-overlay.show .modal-content {
      transform: scale(1) translateY(0);
    }
    
    .modal-header {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .modal-icon {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      color: white;
      font-size: 24px;
    }
    
    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: #1f2937;
      margin: 0 0 8px;
    }
    
    .modal-subtitle {
      font-size: 16px;
      color: #6b7280;
      margin: 0;
    }
    
    .modal-body {
      margin-bottom: 32px;
    }
    
    .modal-text {
      font-size: 16px;
      line-height: 1.6;
      color: #374151;
      margin-bottom: 16px;
    }
    
    .modal-warning {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 1px solid #f59e0b;
      border-radius: 12px;
      padding: 16px;
      font-size: 14px;
      color: #92400e;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .modal-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .modal-btn {
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      min-width: 120px;
    }
    
    .modal-btn-primary {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3);
    }
    
    .modal-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    }
    
    .modal-btn-secondary {
      background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
      color: #374151;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    
    .modal-btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
    }
    
    /* Ajustar espa√ßamento da se√ß√£o hero */
    .hero-section {
      padding-top: 0px !important; /* Removido completamente o padding superior */
      margin-top: -10px !important; /* Margem negativa para aproximar ainda mais */
      min-height: calc(100vh - 60px); /* Compensar altura do header */
    }
    
    /* Responsivo: espa√ßamento menor em mobile */
    @media (max-width: 768px) {
      .hero-section {
        padding-top: 0px !important;
        margin-top: -5px !important;
        min-height: calc(100vh - 50px);
      }
    }
  </style>
</head>
<body>
  <!-- Reset Layout Button -->
  <button id="resetLayoutBtn" class="reset-layout-btn">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
      <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
      <path d="M21 3v5h-5"></path>
      <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
      <path d="M3 21v-5h5"></path>
    </svg>
    Resetar Layout
  </button>
  
  <!-- Modal de Confirma√ß√£o -->
  <div id="resetModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 28px; height: 28px;">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
        </div>
        <h3 class="modal-title">Resetar Layout</h3>
        <p class="modal-subtitle">Confirme esta a√ß√£o</p>
      </div>
      
      <div class="modal-body">
        <p class="modal-text">
          Voc√™ est√° prestes a <strong>resetar o layout</strong> para o estado original. 
          Esta a√ß√£o ir√°:
        </p>
        <ul style="margin: 16px 0; padding-left: 20px; color: #374151;">
          <li>Restaurar todos os textos para o conte√∫do padr√£o</li>
          <li>Reverter todas as personaliza√ß√µes feitas</li>
        </ul>
        
        <div class="modal-warning">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          <span><strong>Aten√ß√£o:</strong> Esta a√ß√£o n√£o pode ser desfeita. Todas as personaliza√ß√µes ser√£o perdidas.</span>
        </div>
      </div>
      
      <div class="modal-actions">
        <button id="cancelReset" class="modal-btn modal-btn-secondary">
          Cancelar
        </button>
        <button id="confirmReset" class="modal-btn modal-btn-primary">
          Sim, Resetar
        </button>
      </div>
    </div>
  </div>
  
  <!-- Success/Error Messages -->
  <div id="editMessage" class="edit-message"></div>

  <!-- SE√á√ÉO 1: HERO -->
  <section class="hero-section">
    
    <!-- Background Effects -->
    <div class="bg-effects">
      <!-- Animated Blobs -->
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>
      <div class="blob blob-3"></div>
    </div>

    <!-- Grid Pattern -->
    <div class="grid-pattern"></div>

    <!-- Floating Elements -->
    <div class="floating-elements">
      <div class="floating-dot dot-1"></div>
      <div class="floating-dot dot-2"></div>
      <div class="floating-dot dot-3"></div>
      <div class="floating-dot mini-dot-1"></div>
      <div class="floating-dot mini-dot-2"></div>
      <div class="floating-dot mini-dot-3"></div>
    </div>

    <!-- Main Content -->
    <div class="container">
      <div class="hero-grid">
        
        <!-- Left Column: Text Content -->
        <div class="hero-content">
          
          <!-- Badge -->
          <div class="hero-badge" data-field="tagname">
            <div class="badge-content">
              <div class="badge-dot"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge-icon">
                <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path>
              </svg>
              <span>‚ö° <span class="description-highlight">Elite Performance</span> garantido</span>
            </div>
            <div class="badge-content">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge-icon">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <small>m√©todo exclusivo</small>
            </div>
          </div>

          <!-- Main Title -->
          <div>
            <h1 class="hero-title" data-field="title">
              Domine 
              <span class="hero-title-gradient">Marketing Digital</span> 
              <span class="hero-title-secondary">em 30 Dias</span>
            </h1>
            
            <p class="hero-description" data-field="description">
              Transforme sua carreira e conquiste a 
              <span class="description-highlight">liberdade financeira</span> 
              com estrat√©gias comprovadas que geraram mais de 
              <span class="description-highlight-cyan">R$10 milh√µes</span> em vendas.
            </p>
          </div>

          <!-- CTA Buttons -->
          <div class="hero-cta">
            <button class="btn-primary" data-field="button1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
                <path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"></path>
                <circle cx="12" cy="8" r="6"></circle>
              </svg>
              GARANTIR MINHA VAGA
            </button>
            
            <button class="btn-secondary" data-field="button2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
                <polygon points="6 3 20 12 6 21 6 3"></polygon>
              </svg>
              Ver Pr√©via Gratuita
            </button>
          </div>

          <!-- Social Proof -->
          <div class="hero-social-proof">
            <div class="stars">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="star">
                <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="star">
                <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="star">
                <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="star">
                <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="star">
                <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
              </svg>
            </div>
            <span class="social-text" data-field="review">
              4.9/5 ‚Ä¢ Baseado em 
              <span class="social-highlight">1.2k</span> avalia√ß√µes
            </span>
          </div>
        </div>

        <!-- Right Column: Content Area -->
        <div class="hero-image-container">
          <div class="hero-image-wrapper">
            <!-- √Årea reservada para conte√∫do visual futuro -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- JavaScript Simples e Robusto -->
  <script>
    // Configura√ß√£o do Supabase
    const SUPABASE_URL = "https://erfuinkfouijxgfkxhhn.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyZnVpbmtmb3VpanhnZmt4aGhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMzU2NTAsImV4cCI6MjA2MjgxMTY1MH0.9cxdr4AC0HY3t64n3dJ939wVNwlp9Prpzlx-sxfCOnU";
    
    let currentPageId = null;
    let currentEditingElement = null;
    let originalContent = null;
    let editControls = null;
    
    // Fun√ß√£o para obter ID da p√°gina (DIN√ÇMICO)
    function getPageId() {
      // Verificar apenas URL params e vari√°vel global
      const urlParams = new URLSearchParams(window.location.search);
      const pageId = urlParams.get('pageId') || window.landingPageId;
      
      console.log('üîç Detectando Page ID...');
      console.log('üÜî PageId encontrado:', pageId);
      
      return pageId;
    }
    
    // Fun√ß√£o para fazer requisi√ß√µes ao Supabase
    async function supabaseRequest(method, endpoint, data = null) {
      const url = `${SUPABASE_URL}/rest/v1/${endpoint}`;
      const headers = {
        'apikey': SUPABASE_KEY,
        'Authorization': `Bearer ${SUPABASE_KEY}`,
        'Content-Type': 'application/json',
        'Prefer': 'return=representation'
      };
      
      const config = { method, headers };
      if (data) config.body = JSON.stringify(data);
      
      console.log('üì° === REQUISI√á√ÉO SUPABASE ===');
      console.log('Method:', method);
      console.log('URL:', url);
      console.log('Headers:', headers);
      console.log('Data:', data);
      
      try {
        const response = await fetch(url, config);
        const result = await response.json();
        
        console.log('üì® === RESPOSTA SUPABASE ===');
        console.log('Status:', response.status);
        console.log('Ok:', response.ok);
        console.log('Result:', result);
        
        if (!response.ok) {
          console.error('‚ùå === ERRO DETALHADO ===');
          console.error('Status:', response.status);
          console.error('StatusText:', response.statusText);
          console.error('Error details:', result);
          
          // Tratar erros espec√≠ficos
          if (response.status === 401) {
            throw new Error('N√£o autorizado - verificar autentica√ß√£o');
          } else if (response.status === 403) {
            throw new Error('Acesso negado - verificar pol√≠ticas RLS');
          } else if (response.status === 404) {
            throw new Error('Registro n√£o encontrado');
          } else if (response.status === 409) {
            throw new Error('Conflito - verificar dados duplicados');
          } else {
            throw new Error(result.message || `Erro HTTP ${response.status}`);
          }
        }
        
        console.log('‚úÖ Requisi√ß√£o bem-sucedida');
        return result;
        
      } catch (fetchError) {
        console.error('‚ùå === ERRO DE REDE ===');
        console.error('Fetch error:', fetchError);
        throw fetchError;
      }
    }
    
    // Limpar HTML inv√°lido antes de salvar
    function cleanHTMLForSaving(html) {
      // Remover controles de edi√ß√£o e outros elementos indesejados
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = html;
      
      // Remover controles de edi√ß√£o (m√∫ltiplas classes)
      const editControls = tempDiv.querySelectorAll('.edit-controls, .edit-btn, [class*="edit-"]');
      editControls.forEach(control => control.remove());
      
      // Remover elementos com atributos de edi√ß√£o
      const editableElements = tempDiv.querySelectorAll('[contenteditable="true"], [contenteditable="false"]');
      editableElements.forEach(el => {
        el.removeAttribute('contenteditable');
      });
      
      // Remover classes tempor√°rias de edi√ß√£o
      const elementsWithEditClasses = tempDiv.querySelectorAll('.editing, .editable-text, .saving');
      elementsWithEditClasses.forEach(el => {
        el.classList.remove('editing', 'editable-text', 'saving');
      });
      
      // Remover qualquer bot√£o que n√£o seja parte do conte√∫do original
      const unwantedButtons = tempDiv.querySelectorAll('button:not([data-field])');
      unwantedButtons.forEach(btn => {
        if (btn.textContent?.includes('Salvar') || btn.classList.contains('edit-btn')) {
          btn.remove();
        }
      });
      
      const cleanedHTML = tempDiv.innerHTML.trim();
      console.log('üßπ HTML limpo (sem controles de edi√ß√£o):', cleanedHTML);
      return cleanedHTML;
    }
    
    // Extrair texto de um elemento
    function extractTextFromElement(selector) {
      console.log('üîç Extraindo de:', selector);
      const element = document.querySelector(selector);
      if (!element) {
        console.warn('‚ö†Ô∏è Elemento n√£o encontrado:', selector);
        return '';
      }
      
      let extractedContent = '';
      
      if (selector.includes('button')) {
        // Para bot√µes, extrair apenas o texto mas preservar estrutura
        const textNodes = Array.from(element.childNodes).filter(node => node.nodeType === 3);
        extractedContent = textNodes.map(node => node.textContent.trim()).join(' ').trim();
        console.log('üîò Texto do bot√£o extra√≠do:', extractedContent);
      } else {
        // Para outros elementos, preservar HTML completo com classes CSS importantes
        const clonedElement = element.cloneNode(true);
        
        // Remover controles de edi√ß√£o se existirem
        const editControls = clonedElement.querySelectorAll('.edit-controls');
        editControls.forEach(control => control.remove());
        
        // Remover atributos de edi√ß√£o mas manter classes CSS importantes
        clonedElement.removeAttribute('contenteditable');
        clonedElement.classList.remove('editing', 'editable-text');
        
        // Preservar HTML completo com classes de estilo
        extractedContent = clonedElement.innerHTML.trim();
        console.log('üé® HTML com classes CSS extra√≠do:', extractedContent);
      }
      
      return extractedContent;
    }
    
    // Carregar dados salvos do banco e atualizar a tela
    async function loadSavedData() {
      console.log('üì• === CARREGANDO DADOS SALVOS ===');
      
      try {
        if (!currentPageId) {
          console.log('‚ö†Ô∏è Nenhum ID de p√°gina - usando dados padr√£o do HTML');
          return;
        }
        
        console.log('üîç Buscando dados salvos para:', currentPageId);
        
        // Buscar dados do banco
        const result = await supabaseRequest('GET', `course_landing_pages?id=eq.${currentPageId}&select=sec_hero`);
        
        if (!result || result.length === 0) {
          console.log('‚ö†Ô∏è Nenhum dado encontrado - usando dados padr√£o do HTML');
          return;
        }
        
        const savedData = result[0].sec_hero;
        console.log('üì¶ Dados encontrados:', savedData);
        
        if (!savedData || !savedData.element_1) {
          console.log('‚ö†Ô∏è Estrutura de dados inv√°lida - usando dados padr√£o do HTML');
          return;
        }
        
        // Atualizar elementos na tela com dados salvos
        const element1 = savedData.element_1;
        
        if (element1.tagname) {
          const tagnameEl = document.querySelector('[data-field="tagname"]');
          if (tagnameEl) {
            tagnameEl.innerHTML = element1.tagname;
            console.log('‚úÖ Tagname atualizado:', element1.tagname);
          }
        }
        
        if (element1.title) {
          const titleEl = document.querySelector('[data-field="title"]');
          if (titleEl) {
            titleEl.innerHTML = element1.title;
            console.log('‚úÖ Title atualizado:', element1.title);
          }
        }
        
        if (element1.description) {
          const descriptionEl = document.querySelector('[data-field="description"]');
          if (descriptionEl) {
            descriptionEl.innerHTML = element1.description;
            console.log('‚úÖ Description atualizado:', element1.description);
          }
        }
        
        if (element1.button1) {
          const button1El = document.querySelector('[data-field="button1"]');
          if (button1El) {
            // Para bot√µes, atualizar apenas o texto, mantendo √≠cones
            const textNodes = Array.from(button1El.childNodes).filter(node => node.nodeType === 3);
            if (textNodes.length > 0) {
              textNodes[textNodes.length - 1].textContent = element1.button1;
            } else {
              // Se n√£o tem n√≥s de texto, adicionar no final
              button1El.appendChild(document.createTextNode(element1.button1));
            }
            console.log('‚úÖ Button1 atualizado:', element1.button1);
          }
        }
        
        if (element1.button2) {
          const button2El = document.querySelector('[data-field="button2"]');
          if (button2El) {
            const textNodes = Array.from(button2El.childNodes).filter(node => node.nodeType === 3);
            if (textNodes.length > 0) {
              textNodes[textNodes.length - 1].textContent = element1.button2;
            } else {
              button2El.appendChild(document.createTextNode(element1.button2));
            }
            console.log('‚úÖ Button2 atualizado:', element1.button2);
          }
        }
        
        if (element1.review) {
          const reviewEl = document.querySelector('[data-field="review"]');
          if (reviewEl) {
            reviewEl.innerHTML = element1.review;
            console.log('‚úÖ Review atualizado:', element1.review);
          }
        }
        
        console.log('‚úÖ === DADOS CARREGADOS COM SUCESSO ===');
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage('Dados carregados do banco!', 'success');
        }
        
        // Adicionar marcador para indicar que dados foram carregados
        document.body.classList.add('loaded-from-db');
        
      } catch (error) {
        console.error('‚ùå Erro ao carregar dados salvos:', error);
        console.log('üìÑ Usando dados padr√£o do HTML');
      }
    }
    
    // FUN√á√ÉO GLOBAL: Salvar todos os dados (chamada pelo bot√£o do cabe√ßalho)
    window.saveHeroModel = async function() {
      console.log('üåç === SALVAMENTO COMPLETO INICIADO ===');
      
      try {
        // Verificar se temos ID da p√°gina
        currentPageId = getPageId();
        if (!currentPageId) {
          throw new Error('ID da p√°gina n√£o encontrado. Verifique se a p√°gina foi criada corretamente.');
        }
        
        console.log('üéØ Usando pageId:', currentPageId);
        
        // Verificar se a p√°gina existe
        console.log('üîç Verificando se a p√°gina existe...');
        const pageCheck = await supabaseRequest('GET', `course_landing_pages?id=eq.${currentPageId}&select=id,is_active`);
        
        if (!pageCheck || pageCheck.length === 0) {
          throw new Error(`P√°gina com ID ${currentPageId} n√£o encontrada no banco de dados.`);
        }
        
        if (!pageCheck[0].is_active) {
          throw new Error('P√°gina n√£o est√° ativa. Apenas p√°ginas ativas podem ser editadas.');
        }
        
        console.log('‚úÖ P√°gina encontrada e ativa');
        
        // Extrair todos os dados
        console.log('üì§ Extraindo dados de todas as tags...');
        const heroData = {
          element_1: {
            tagname: extractTextFromElement('[data-field="tagname"]'),
            title: extractTextFromElement('[data-field="title"]'),
            description: extractTextFromElement('[data-field="description"]'),
            button1: extractTextFromElement('[data-field="button1"]'),
            button2: extractTextFromElement('[data-field="button2"]'),
            review: extractTextFromElement('[data-field="review"]')
          }
        };
        
        console.log('üì¶ Dados extra√≠dos completos:', heroData);
        
        // Validar se extraiu dados
        const extractedValues = Object.values(heroData.element_1);
        const validValues = extractedValues.filter(v => v && v.trim().length > 0);
        
        console.log('üìä Valida√ß√£o dos dados:');
        console.log('Total de campos:', extractedValues.length);
        console.log('Campos com dados v√°lidos:', validValues.length);
        
        if (validValues.length === 0) {
          throw new Error('Nenhum dado v√°lido foi extra√≠do das tags HTML. Verifique se os elementos com data-field existem.');
        }
        
        // Salvar no banco
        console.log('üíæ Salvando no banco de dados...');
        const updateResult = await supabaseRequest('PATCH', `course_landing_pages?id=eq.${currentPageId}`, {
          sec_hero: heroData
        });
        
        if (!updateResult || updateResult.length === 0) {
          throw new Error('Nenhum registro foi atualizado. Verifique as pol√≠ticas de seguran√ßa.');
        }
        
        console.log('‚úÖ === SALVAMENTO COMPLETO BEM-SUCEDIDO ===');
        console.log('Resultado:', updateResult[0]);
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage('Modelo salvo com sucesso!', 'success');
        }
        return updateResult[0];
        
      } catch (error) {
        console.error('‚ùå === ERRO NO SALVAMENTO COMPLETO ===');
        console.error('Error object:', error);
        console.error('Error message:', error.message);
        console.error('Error stack:', error.stack);
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage(`Erro ao salvar modelo: ${error.message}`, 'error');
        }
        throw error;
      }
    };
    
    // Fun√ß√£o para mostrar mensagens
    function showMessage(text, type) {
      const messageEl = document.getElementById('editMessage');
      messageEl.textContent = text;
      messageEl.className = `edit-message ${type}`;
      messageEl.classList.add('show');
      
      setTimeout(() => {
        messageEl.classList.remove('show');
      }, 3000);
    }
    
    // Fun√ß√£o para iniciar edi√ß√£o inline
    function startEditing(event) {
      event.preventDefault();
      event.stopPropagation();
      
      if (currentEditingElement === event.currentTarget) return;
      
      // Cancelar edi√ß√£o anterior
      if (currentEditingElement) cancelEditing();
      
      const element = event.currentTarget;
      const field = element.getAttribute('data-field');
      
      currentEditingElement = element;
      originalContent = extractTextFromElement(`[data-field="${field}"]`);
      
      // Ativar modo de edi√ß√£o
      element.classList.add('editing');
      element.contentEditable = 'true';
      element.focus();
      
      // Mostrar controles
      showEditControls(element, field);
      
      console.log('üìù === EDI√á√ÉO INICIADA ===');
      console.log('Campo:', field);
      console.log('Conte√∫do original:', originalContent);
    }
    
    // Mostrar controles de edi√ß√£o
    function showEditControls(element, field) {
      if (editControls) editControls.remove();
      
      editControls = document.createElement('div');
      editControls.className = 'edit-controls';
      
      const saveBtn = document.createElement('button');
      saveBtn.className = 'edit-btn save';
      saveBtn.innerHTML = '‚úì Salvar';
      saveBtn.onclick = () => saveFieldChange(field);
      
      // IMPORTANTE: Garantir que o bot√£o n√£o seja edit√°vel
      saveBtn.contentEditable = 'false';
      saveBtn.setAttribute('contenteditable', 'false');
      
      // Prevenir que o bot√£o interfira na edi√ß√£o
      saveBtn.addEventListener('mousedown', (e) => {
        e.preventDefault(); // Evita perder foco do elemento edit√°vel
      });
      
      saveBtn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
      });
      
      // Garantir que o container dos controles tamb√©m n√£o seja edit√°vel
      editControls.contentEditable = 'false';
      editControls.setAttribute('contenteditable', 'false');
      
      editControls.appendChild(saveBtn);
      
      element.style.position = 'relative';
      element.appendChild(editControls);
      
      console.log('üîß Controles de edi√ß√£o criados (n√£o-edit√°veis)');
    }
    
    // Salvar mudan√ßa de campo espec√≠fico
    async function saveFieldChange(field) {
      console.log('üìù === SALVAMENTO INDIVIDUAL INICIADO ===');
      console.log('Campo:', field);
      
      try {
        // Verificar ID da p√°gina
        if (!currentPageId) {
          currentPageId = getPageId();
          if (!currentPageId) {
            throw new Error('ID da p√°gina n√£o encontrado');
          }
        }
        
        console.log('üéØ Usando pageId:', currentPageId);
        
        const newContent = currentEditingElement.innerHTML.trim();
        const cleanedContent = cleanHTMLForSaving(newContent);
        console.log('üìù Novo conte√∫do bruto:', newContent);
        console.log('üìù Conte√∫do limpo para salvar:', cleanedContent);
        console.log('üìù Conte√∫do original:', originalContent);
        
        if (!cleanedContent) {
          showMessage('Conte√∫do n√£o pode estar vazio!', 'error');
          return;
        }
        
        // Buscar dados atuais
        console.log('üîç Buscando dados atuais...');
        const current = await supabaseRequest('GET', `course_landing_pages?id=eq.${currentPageId}&select=sec_hero,is_active`);
        
        if (!current || current.length === 0) {
          throw new Error('P√°gina n√£o encontrada');
        }
        
        if (!current[0].is_active) {
          throw new Error('P√°gina n√£o est√° ativa');
        }
        
        const currentData = current[0].sec_hero || { element_1: {} };
        console.log('üìä Dados atuais:', currentData);
        
        // Atualizar campo espec√≠fico
        if (!currentData.element_1) {
          currentData.element_1 = {};
        }
        currentData.element_1[field] = cleanedContent;
        
        console.log('üì¶ Dados que ser√£o salvos:', currentData);
        
        // Salvar no banco
        console.log('üíæ Salvando campo no banco...');
        const updateResult = await supabaseRequest('PATCH', `course_landing_pages?id=eq.${currentPageId}`, {
          sec_hero: currentData
        });
        
        if (!updateResult || updateResult.length === 0) {
          throw new Error('Nenhum registro foi atualizado');
        }
        
        console.log('‚úÖ === SALVAMENTO INDIVIDUAL BEM-SUCEDIDO ===');
        console.log('Resultado:', updateResult[0]);
        
        // Atualizar o elemento na tela com o conte√∫do limpo salvo
        currentEditingElement.innerHTML = cleanedContent;
        
        finishEditing();
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage('Salvo com sucesso!', 'success');
        }
        
      } catch (error) {
        console.error('‚ùå === ERRO NO SALVAMENTO INDIVIDUAL ===');
        console.error('Error object:', error);
        console.error('Error message:', error.message);
        console.error('Error stack:', error.stack);
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage(`Erro ao salvar: ${error.message}`, 'error');
        }
      }
    }
    
    // Restaurar cores originais
    function restoreOriginalColors(field) {
      // N√ÉO sobrescrever o texto editado, apenas aplicar classes CSS se necess√°rio
      const currentText = currentEditingElement.innerHTML.trim();
      
      if (field === 'title') {
        // Aplicar classes gradiente apenas se o texto cont√©m as palavras-chave
        if (currentText.includes('Marketing Digital') && !currentText.includes('hero-title-gradient')) {
          currentEditingElement.innerHTML = currentText
            .replace('Marketing Digital', '<span class="hero-title-gradient">Marketing Digital</span>')
            .replace(/(\d+\s*Dias?)/, '<span class="hero-title-secondary">$1</span>');
        }
      } else if (field === 'description') {
        // Aplicar classes de destaque apenas se o texto cont√©m as palavras-chave
        let updatedText = currentText;
        if (currentText.includes('liberdade financeira') && !currentText.includes('description-highlight')) {
          updatedText = updatedText.replace('liberdade financeira', '<span class="description-highlight">liberdade financeira</span>');
        }
        if (currentText.includes('R$') && !currentText.includes('description-highlight-cyan')) {
          updatedText = updatedText.replace(/(R\$[0-9\s,]+milh√µes?)/gi, '<span class="description-highlight-cyan">$1</span>');
        }
        if (updatedText !== currentText) {
          currentEditingElement.innerHTML = updatedText;
        }
      } else if (field === 'review') {
        // Aplicar destaque nos n√∫meros apenas se cont√©m n√∫meros e n√£o tem classe
        if (currentText.match(/\d+[kK]/) && !currentText.includes('social-highlight')) {
          currentEditingElement.innerHTML = currentText.replace(/(\d+[kK])/g, '<span class="social-highlight">$1</span>');
        }
      }
      
      console.log('üé® Cores aplicadas ao texto:', field, currentEditingElement.innerHTML);
    }
    
    // Cancelar edi√ß√£o (chamada quando clica fora)
    function cancelEditing() {
      if (!currentEditingElement) return;
      
      const field = currentEditingElement.getAttribute('data-field');
      
      // Restaurar conte√∫do original que estava antes da edi√ß√£o
      if (originalContent) {
        currentEditingElement.innerHTML = originalContent;
      }
      
      finishEditing();
      console.log('‚ùå Edi√ß√£o cancelada (clique fora) - conte√∫do restaurado');
    }
    
    // Finalizar edi√ß√£o
    function finishEditing() {
      if (currentEditingElement) {
        currentEditingElement.contentEditable = 'false';
        currentEditingElement.classList.remove('editing');
        currentEditingElement = null;
      }
      
      if (editControls) {
        editControls.remove();
        editControls = null;
      }
    }
    
    // NOVO: Fun√ß√µes do Modal de Reset Layout
    function showResetModal() {
      const modal = document.getElementById('resetModal');
      modal.classList.add('show');
      console.log('üìã Modal de reset exibido');
    }
    
    function hideResetModal() {
      const modal = document.getElementById('resetModal');
      modal.classList.remove('show');
      console.log('üìã Modal de reset ocultado');
    }
    
    // Dados originais padr√£o do layout (conforme o HTML original)
    function getOriginalLayoutData() {
      return {
        element_1: {
          tagname: `<div class="badge-content">
              <div class="badge-dot"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge-icon">
                <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path>
              </svg>
              <span>‚ö° <span class="description-highlight">Elite Performance</span> garantido</span>
            </div>
            <div class="badge-content">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="badge-icon">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <small>m√©todo exclusivo</small>
            </div>`,
          title: `Domine 
              <span class="hero-title-gradient">Marketing Digital</span> 
              <span class="hero-title-secondary">em 30 Dias</span>`,
          description: `Transforme sua carreira e conquiste a 
              <span class="description-highlight">liberdade financeira</span> 
              com estrat√©gias comprovadas que geraram mais de 
              <span class="description-highlight-cyan">R$10 milh√µes</span> em vendas.`,
          button1: `GARANTIR MINHA VAGA`,
          button2: `Ver Pr√©via Gratuita`,
          review: `4.9/5 ‚Ä¢ Baseado em 
              <span class="social-highlight">1.2k</span> avalia√ß√µes`
        }
      };
    }
    
    // Resetar layout para o estado original
    async function resetLayoutToOriginal() {
      console.log('üîÑ === RESET DE LAYOUT INICIADO ===');
      
      try {
        // Verificar ID da p√°gina
        if (!currentPageId) {
          currentPageId = getPageId();
          if (!currentPageId) {
            throw new Error('ID da p√°gina n√£o encontrado');
          }
        }
        
        console.log('üéØ Resetando layout para pageId:', currentPageId);
        
        // Obter dados originais
        const originalData = getOriginalLayoutData();
        console.log('üì¶ Dados originais:', originalData);
        
        // Atualizar elementos na tela com dados originais
        Object.entries(originalData.element_1).forEach(([field, content]) => {
          const element = document.querySelector(`[data-field="${field}"]`);
          if (element) {
            if (field.includes('button')) {
              // Para bot√µes, atualizar apenas o texto, mantendo √≠cones SVG
              const textNodes = Array.from(element.childNodes).filter(node => node.nodeType === 3);
              if (textNodes.length > 0) {
                textNodes[textNodes.length - 1].textContent = content;
              } else {
                element.appendChild(document.createTextNode(content));
              }
            } else {
              // Para outros elementos, aplicar HTML completo
              element.innerHTML = content;
            }
            console.log(`‚úÖ ${field} resetado para valor original`);
          }
        });
        
        // Salvar dados originais no banco
        console.log('üíæ Salvando dados originais no banco...');
        const updateResult = await supabaseRequest('PATCH', `course_landing_pages?id=eq.${currentPageId}`, {
          sec_hero: originalData
        });
        
        if (!updateResult || updateResult.length === 0) {
          throw new Error('Nenhum registro foi atualizado no banco');
        }
        
        console.log('‚úÖ === RESET DE LAYOUT CONCLU√çDO ===');
        console.log('Resultado:', updateResult[0]);
        
        // Remover marcador de dados carregados para permitir nova sincroniza√ß√£o
        document.body.classList.remove('loaded-from-db');
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage('Layout resetado com sucesso!', 'success');
        }
        hideResetModal();
        
      } catch (error) {
        console.error('‚ùå === ERRO NO RESET DE LAYOUT ===');
        console.error('Error object:', error);
        console.error('Error message:', error.message);
        console.error('Error stack:', error.stack);
        
        // Exibir mensagem apenas se n√£o for visualiza√ß√£o p√∫blica
        if (!window.isPublicView) {
          showMessage(`Erro ao resetar layout: ${error.message}`, 'error');
        }
      }
    }
    
    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ === SISTEMA INICIADO ===');
      
      // Verificar se √© visualiza√ß√£o p√∫blica atrav√©s da URL
      const urlParams = new URLSearchParams(window.location.search);
      const isPublicFromURL = urlParams.get('public') === 'true';
      
      if (isPublicFromURL) {
        console.log('üëÅÔ∏è Modo p√∫blico detectado via URL');
        window.isPublicView = true;
        
        // Adicionar classe ao body para desabilitar estilos de hover
        document.body.classList.add('public-view');
        
        // Esconder bot√£o de reset imediatamente
        const resetBtn = document.getElementById('resetLayoutBtn');
        if (resetBtn) {
          resetBtn.style.display = 'none';
          console.log('üîí Bot√£o Reset Layout ocultado (URL p√∫blica)');
        }
      }
      
      // Definir ID da p√°gina
      currentPageId = getPageId();
      console.log('üÜî P√°gina detectada:', currentPageId);
      
      // Carregar dados salvos do banco de dados
      if (currentPageId) {
        loadSavedData();
      }
      
      // Adicionar listeners para edi√ß√£o (APENAS se n√£o for visualiza√ß√£o p√∫blica)
      if (!window.isPublicView) {
        const editableElements = document.querySelectorAll('[data-field]');
        console.log('üìù Elementos edit√°veis encontrados:', editableElements.length);
        
        editableElements.forEach(element => {
          element.addEventListener('click', startEditing);
          console.log('‚úÖ Listener adicionado para:', element.getAttribute('data-field'));
        });
        
        // Clique fora cancela edi√ß√£o
        document.addEventListener('click', (e) => {
          if (!e.target.closest('[data-field]') && !e.target.closest('.edit-controls')) {
            cancelEditing();
          }
        });
        
        console.log('‚úÖ Funcionalidades de edi√ß√£o habilitadas');
      } else {
        console.log('üîí Funcionalidades de edi√ß√£o desabilitadas (visualiza√ß√£o p√∫blica)');
      }
      
      // NOVO: Event listeners para Reset Layout (APENAS se n√£o for visualiza√ß√£o p√∫blica)
      if (!window.isPublicView) {
        const resetBtn = document.getElementById('resetLayoutBtn');
        const resetModal = document.getElementById('resetModal');
        const cancelResetBtn = document.getElementById('cancelReset');
        const confirmResetBtn = document.getElementById('confirmReset');
        
        // Abrir modal ao clicar no bot√£o Reset
        resetBtn.addEventListener('click', () => {
          showResetModal();
        });
        
        // Fechar modal ao clicar em Cancelar
        cancelResetBtn.addEventListener('click', () => {
          hideResetModal();
        });
        
        // Confirmar reset
        confirmResetBtn.addEventListener('click', () => {
          resetLayoutToOriginal();
        });
        
        // Fechar modal ao clicar fora do conte√∫do
        resetModal.addEventListener('click', (e) => {
          if (e.target === resetModal) {
            hideResetModal();
          }
        });
        
        // Fechar modal com tecla ESC
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && resetModal.classList.contains('show')) {
            hideResetModal();
          }
        });
        
        console.log('‚úÖ Event listeners do modal de reset configurados');
      }
      
      console.log('‚úÖ === SISTEMA PRONTO ===');
    });
    
    // NOVO: Listener para receber Page ID via postMessage
    window.addEventListener('message', function(event) {
      if (event.data && event.data.type === 'SET_LANDING_PAGE_ID') {
        const pageId = event.data.pageId;
        const isPublicView = event.data.isPublicView || false;
        
        console.log('üì® Page ID recebido via postMessage:', pageId);
        console.log('üëÅÔ∏è Visualiza√ß√£o p√∫blica:', isPublicView);
        
        // Atualizar Page ID atual
        currentPageId = pageId;
        window.landingPageId = pageId;
        window.isPublicView = isPublicView;
        
        // Adicionar classe ao body se for visualiza√ß√£o p√∫blica
        if (isPublicView) {
          document.body.classList.add('public-view');
          console.log('üëÅÔ∏è Classe public-view adicionada ao body');
        }
        
        // Esconder bot√£o de reset se for visualiza√ß√£o p√∫blica
        const resetBtn = document.getElementById('resetLayoutBtn');
        if (resetBtn) {
          if (isPublicView) {
            resetBtn.style.display = 'none';
            console.log('üîí Bot√£o Reset Layout ocultado (visualiza√ß√£o p√∫blica)');
          } else {
            resetBtn.style.display = 'flex';
            console.log('üîß Bot√£o Reset Layout exibido (modo edi√ß√£o)');
          }
        }
        
        // Carregar dados salvos se ainda n√£o foi carregado
        if (pageId && !document.body.classList.contains('loaded-from-db')) {
          console.log('üîÑ Carregando dados salvos ap√≥s receber Page ID...');
          loadSavedData();
        }
        
        console.log('‚úÖ Page ID atualizado via postMessage');
      }
    });
    
    // Fun√ß√£o para definir ID externamente (mantida para compatibilidade)
    window.setLandingPageId = function(id) {
      currentPageId = id;
      window.landingPageId = id;
      console.log('üÜî ID definido externamente:', id);
      showMessage(`ID atualizado: ${id.substring(0, 8)}...`, 'success');
    };
    
    // Fun√ß√£o para testar o sistema
    window.testSystem = function() {
      console.log('üß™ === TESTE DO SISTEMA ===');
      console.log('Page ID atual:', currentPageId);
      console.log('Elementos edit√°veis:', document.querySelectorAll('[data-field]').length);
      console.log('Supabase URL:', SUPABASE_URL);
      console.log('Chave definida:', !!SUPABASE_KEY);
      
      if (currentPageId) {
        console.log('‚úÖ Sistema configurado corretamente');
        showMessage('Sistema funcionando!', 'success');
      } else {
        console.log('‚ùå ID da p√°gina n√£o definido');
        showMessage('Configure o ID da p√°gina primeiro', 'error');
      }
    };
  </script>
</body>
</html> 